(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{t:()=>L});var e=new Audio,n={HIDDEN:"hidden",NUMBER:"number",MARKED:"marked",MINE:"mine",MARKED_WRONG:"marked-wrong"},o={START:"./assets/sounds/start.mp3",CLICK:"./assets/sounds/click.mp3",MARK:"./assets/sounds/mark.mp3",LOSE:"./assets/sounds/lose.mp3",WIN:"./assets/sounds/win.mp3"},s={EASY:"easy",MEDIUM:"medium",HARD:"hard"},r={LIGHT:"light",DARK:"dark"},a={gameComplexity:s.EASY,currentMode:s.EASY,theme:r.DARK,sounds:!0,minesOnBoard:10,boardSize:10,timerID:0,isFirstMove:!0,firstMoveTile:{x:-1,y:-1}};function i(){for(var t=[],e=function(){var t=[];for(;t.length<a.minesOnBoard;){var e={x:v(a.boardSize),y:v(a.boardSize)},n=a.isFirstMove&&a.firstMoveTile.x===e.x&&a.firstMoveTile.y===e.y;t.some(l.bind(null,e))||n||t.push(e)}return a.isFirstMove=!1,t}(a.boardSize,a.minesOnBoard),o=0;o<a.boardSize;++o){for(var s=[],r=0;r<a.boardSize;++r){var i=document.createElement("div"),u={x:o,y:r,element:i,mine:e.some(l.bind(null,{x:o,y:r})),get status(){return this.element.dataset.status},set status(t){this.element.dataset.status=t}};u.x===a.firstMoveTile.x&&u.y===a.firstMoveTile.y?i.dataset.status=n.NUMBER:i.dataset.status=n.HIDDEN,i.classList.add("tile"),s.push(u)}t.push(s)}return t}function u(t,e){var s=document.querySelector(".flags");if(t.status===n.HIDDEN||t.status===n.MARKED)return!0===e&&m(o.MARK),t.status===n.HIDDEN?(t.status=n.MARKED,void(s&&(s.textContent=+s.textContent+1))):t.status===n.MARKED?(t.status=n.HIDDEN,void(s&&(s.textContent=+s.textContent-1))):void 0}function c(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(a.isFirstMove&&e.mine){a.firstMoveTile={x:e.x,y:e.y};var i=L(),u=function(t){var e;return Array.from(t).forEach((function(t){t.forEach((function(t){t.x===a.firstMoveTile.x&&t.y===a.firstMoveTile.y&&(e=t)}))})),a.firstMoveTile={x:-1,y:-1},e}(i),d=f(i,e),l=d.filter((function(t){return t.mine}));return e.status=n.NUMBER,0===l.length?d.forEach(c.bind(null,i)):p(u,l.length),m(o.CLICK),void(a.isFirstMove=!1)}if(!0===r&&!e.mine&&e.status===n.MARKED){var v=f(t,e).filter((function(t){return t.mine}));return e.status=n.MARKED_WRONG,void p(e,v.length)}if(e.status===n.HIDDEN&&e.status!==n.MARKED)if(e.mine)e.status=n.MINE;else{var E=f(t,e),M=E.filter((function(t){return t.mine}));e.status=n.NUMBER,0===M.length?E.forEach(c.bind(null,t)):p(e,M.length),!0===s&&m(o.CLICK),a.isFirstMove=!1}}function d(){var t=Array.from(JSON.parse(localStorage.getItem("results"))||[]),e=[];return t.map((function(t,n){var o=document.createElement("pre");o.classList.add("result"),o.innerHTML="<span>".concat(n+1,".").concat(n+1<10?"  ":" ","Mode: ").concat(t.complexity,"</span><span>Time - ").concat(t.time,"</span><span>Moves - ").concat(t.moves,"</span>"),e.push(o)})),e}function m(t){a.sounds&&(e.src=t,e.play())}function l(t,e){return t.x===e.x&&t.y===e.y}function v(t){return Math.floor(Math.random()*t)}function f(t,e){for(var n=e.x,o=e.y,s=[],r=-1;r<=1;r++)for(var a=-1;a<=1;a++){var i,u=null===(i=t[n+r])||void 0===i?void 0:i[o+a];u&&s.push(u)}return s}function E(){var t=document.querySelector(".complexity");return t.textContent===s.EASY?(t.textContent=s.MEDIUM,a.gameComplexity=s.MEDIUM,a.boardSize=15,void(a.minesOnBoard=40)):t.textContent===s.MEDIUM?(t.textContent=s.HARD,a.gameComplexity=s.HARD,a.boardSize=25,void(a.minesOnBoard=99)):t.textContent===s.HARD?(t.textContent=s.EASY,a.gameComplexity=s.EASY,a.boardSize=10,void(a.minesOnBoard=10)):void 0}function p(t,e){e&&(t.element.textContent=e,t.element.classList.add("mines-".concat(e)))}function M(){var t=document.body,e=document.querySelector(".theme");return console.log(1),a.theme===r.LIGHT?(t.classList.remove(r.LIGHT),t.classList.add(r.DARK),a.theme=r.DARK,void(e.textContent="".concat(a.theme))):a.theme===r.DARK?(t.classList.remove(r.DARK),t.classList.add(r.LIGHT),a.theme=r.LIGHT,void(e.textContent="".concat(a.theme))):void 0}function x(){var t=document.querySelector(".sounds");a.sounds=!a.sounds,t.textContent=a.sounds?"on":"off"}var y=document.body;function L(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=function(){var t=document.createElement("h1");t.classList.add("title"),t.innerHTML="ðŸ’£ Minesweeper ðŸ’£";var e=document.createElement("div");e.classList.add("subtext"),e.dataset.mineCount=a.minesOnBoard,e.innerHTML="Mines: ".concat(a.minesOnBoard);var n=document.createElement("div");n.classList.add("flags-counter"),n.innerHTML='Flags: <span class="flags">0</span>';var o=document.createElement("div");o.className="board ".concat(a.gameComplexity),o.addEventListener("contextmenu",(function(t){return t.preventDefault()}));var s=document.createElement("div");s.classList.add("moves"),s.innerHTML='Moves: <span class="moves-counter">0</span>';var r=document.createElement("button");r.classList.add("restart-button"),r.innerHTML="New Game";var i=document.createElement("div");i.classList.add("complexity-button"),i.innerHTML='Complexity: <span class="complexity">'.concat(a.gameComplexity,"</span>"),i.addEventListener("click",E);var u=document.createElement("div");u.classList.add("theme-button"),u.innerHTML='Theme: <span class="theme">'.concat(a.theme,"</span>"),u.addEventListener("click",M);var c=document.createElement("div");c.classList.add("sounds-button"),c.innerHTML='Sounds: <span class="sounds">'.concat(a.sounds?"on":"off","</span>"),c.addEventListener("click",x);var m=document.createElement("div");m.classList.add("timer"),m.innerHTML='Time: <span class="time">0</span>';var l=d(),v=document.createElement("button"),f=document.createElement("div");return v.classList.add("score-button"),f.classList.add("score-table"),v.textContent="Last 10 results",l.map((function(t){return f.append(t)})),{title:t,subtext:e,flags:n,boardElement:o,moves:s,restartButton:r,timer:m,scoreButton:v,scoreTable:f,complexityButton:i,themeButton:u,soundsButton:c}}(),s=e.title,r=e.subtext,l=e.flags,v=e.boardElement,f=e.restartButton,p=e.moves,h=e.timer,b=e.scoreButton,T=e.scoreTable,g=e.complexityButton,C=e.themeButton,I=e.soundsButton;!function(t){var e=t.title,n=t.subtext,o=t.flags,s=t.boardElement,r=t.restartButton,a=t.moves,i=t.timer,u=t.scoreButton,c=t.scoreTable,d=t.complexityButton,m=t.themeButton,l=t.soundsButton;y.innerHTML="";var v=document.createElement("div");v.classList.add("counters"),v.append(n,o);var f=document.createElement("div");f.classList.add("buttons"),f.append(r,d,u,m,l);var E=document.createElement("div");E.classList.add("info"),E.append(i,a),y.append(e,v,E,f,c,s)}({title:s,subtext:r,flags:l,boardElement:v,restartButton:f,moves:p,timer:h,scoreButton:b,scoreTable:T,complexityButton:g,themeButton:C,soundsButton:I});var S=i(),A=document.querySelector(".moves-counter"),B=document.querySelector(".score-table");return A.textContent=0,clearTimeout(a.timerID),a.timerID=0,a.currentMode=a.gameComplexity,a.isFirstMove=!0,v.style.setProperty("--size",a.boardSize),S.forEach((function(t){t.forEach((function(t){t.element.addEventListener("click",(function(e){var s;t.status===n.HIDDEN&&(A.textContent=+A.textContent+1),a.timerID||(s=document.querySelector(".time"),a.timerID=setTimeout((function t(){s.textContent=+s.textContent+1,a.timerID=setTimeout(t,1e3)}),1e3));c(S,t,!0),function(t,e){var s=function(t){return t.every((function(t){return t.every((function(t){return t.status===n.NUMBER||t.mine&&(t.status===n.HIDDEN||t.status===n.MARKED)}))}))}(t),r=function(t){return t.some((function(t){return t.some((function(t){return t.status===n.MINE}))}))}(t),i=document.querySelector(".counters");(s||r)&&(e.addEventListener("click",D,{capture:!0}),e.addEventListener("contextmenu",D,{capture:!0}),clearTimeout(a.timerID));if(s){var l=document.querySelector(".time").textContent,v=document.querySelector(".moves-counter").textContent;!function(t){var e=Array.from(JSON.parse(localStorage.getItem("results"))||[]),n=document.querySelector(".score-table");10===e.length&&e.pop();e.unshift(t),localStorage.setItem("results",JSON.stringify(e));var o=d();n.innerHTML="",o.map((function(t){return n.append(t)}))}({complexity:a.currentMode,time:l,moves:v}),i.innerHTML="You Win ðŸ¥³",setTimeout((function(){return m(o.WIN)}),100),t.forEach((function(t){t.forEach((function(t){t.status===n.HIDDEN&&u(t)}))}))}r&&(i.innerHTML="ðŸ˜ˆ BOOM ðŸ˜ˆ",m(o.LOSE),t.forEach((function(e){e.forEach((function(e){e.status!==n.MARKED||e.mine||c(t,e,!1,r);e.status===n.HIDDEN&&c(t,e)}))})))}(S,v)})),t.element.addEventListener("contextmenu",(function(e){e.preventDefault(),u(t,!0),function(t,e){var o=t.reduce((function(t,e){return t+e.filter((function(t){return t.status===n.MARKED})).length}),0);e.textContent="Mines: ".concat(a.minesOnBoard-o)}(S,r)})),v.append(t.element)}))})),f.addEventListener("click",(function(){return L(!0)})),b.addEventListener("click",(function(){return B.classList.toggle("active")})),t&&m(o.START),S}function D(t){t.stopImmediatePropagation()}L()})();